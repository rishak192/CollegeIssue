<!DOCTYPE html5>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Homepage</title>
        <link rel="stylesheet" href="css/homepage.css">
        <link rel="stylesheet" href="css/common.css">
        <link rel="stylesheet" href="css/responsive.css">
        <script src="manageuser.js"></script>
    </head>   
        <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

        <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-app.js"></script>

        <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
        <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-analytics.js"></script>

        <!-- Add Firebase products that you want to use -->
        <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-auth.js"></script>

        <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-firestore.js"></script>

    <body onload="checkCookie()">
        

        <script>
            var firebaseConfig = {
              apiKey: "AIzaSyA9qEtYnbvrjHMVBBA0iu-5LP-3aotjKqI",
              authDomain: "collegeissue-fb27c.firebaseapp.com",
              projectId: "collegeissue-fb27c",
              storageBucket: "collegeissue-fb27c.appspot.com",
              messagingSenderId: "51525938621",
              appId: "1:51525938621:web:0b3ac375aea7c0f52636d4",
              measurementId: "G-GXRHJ1TW3T"
            };
            
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();

            function googleProvider(){
                console.log("Provider");
                var provider = new firebase.auth.GoogleAuthProvider();
                console.log(provider);
                provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
                
                console.log(firebase.auth());
                firebase.auth().signInWithPopup(provider).then((result) => {
                    console.log("result");
                    /** @type {firebase.auth.OAuthCredential} */
                    var credential = result.credential;

                    // This gives you a Google Access Token. You can use it to access the Google API.
                    var token = credential.accessToken;
                    // The signed-in user info.
                    var user = result.user;
                    console.log(result);
                    // ...
                }).catch((error) => {
                    // Handle Errors here.
                    console.log(error);
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    // The email of the user's account used.
                    var email = error.email;
                    // The firebase.auth.AuthCredential type that was used.
                    var credential = error.credential;
                    // ...
                });
            }

          </script>

          <!-- <script src="googlesign.js"></script> -->


        <div class="topbar">
            <h2 class="title">College Issue</h2>
            <h2 class="smalltitle">CI</h2>
            <div class="ask">
                <button onclick="askDropdown()">Ask</button>
            </div>
            <div class="search">
                <input type="text" placeholder="search..." class="stext">
                <input type="submit" value="Search" class="sbutton">
            </div>
            <div class="smallsearch">
                <input type="submit" value="Search" class="sbutton">
            </div>
            <div class="auth">
                <button onclick="showforms(this)" name="alog">Login</button>
                <button onclick="showforms(this)" name="asign">Create Account</button>
            </div>
        </div>
        <div id="dropdown">
            <form onsubmit="postques(event)">
                <div class="askform">
                    <div id="askText">
                        <input type="text" placeholder="Enter your Question..." name="question" onchange="handleChange(this)">
                    </div>
                    <div id="askSubmit">
                        <input type="submit" value="Post Question">
                    </div>
                </div>
            </form>
        </div>

        <div class="asign">
            <div class="sign">
                <div class="accountsign">
                    <button  data-provider="google" data-oauthserver="https://accounts.google.com/o/oauth2/auth" data-oauthversion="2.0"><svg aria-hidden="true" class="native svg-icon iconGoogle" width="18" height="18" viewBox="0 0 18 18"><path d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z" fill="#4285F4"></path><path d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z" fill="#34A853"></path><path d="M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z" fill="#FBBC05"></path><path d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z" fill="#EA4335"></path></svg>
                        Sign up with Google        
                    </button>
    
                    <button  data-provider="github" data-oauthserver="https://github.com/login/oauth/authorize" data-oauthversion="2.0"><svg aria-hidden="true" class="svg-icon iconGitHub" width="18" height="18" viewBox="0 0 18 18"><path d="M9 1a8 8 0 00-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.42 7.42 0 014 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 009 1z" fill="#010101"></path></svg>
                        Sign up with GitHub        
                    </button>
    
                    <button  data-provider="facebook" data-oauthserver="https://www.facebook.com/v2.0/dialog/oauth" data-oauthversion="2.0"> <svg aria-hidden="true" class="svg-icon iconFacebook" width="18" height="18" viewBox="0 0 18 18"><path d="M3 1a2 2 0 00-2 2v12c0 1.1.9 2 2 2h12a2 2 0 002-2V3a2 2 0 00-2-2H3zm6.55 16v-6.2H7.46V8.4h2.09V6.61c0-2.07 1.26-3.2 3.1-3.2.88 0 1.64.07 1.87.1v2.16h-1.29c-1 0-1.19.48-1.19 1.18V8.4h2.39l-.31 2.42h-2.08V17h-2.5z" fill="#4167B2"></path></svg>
                        Sign up with Facebook 
                   </button>
                </div>
                <form class="signform" onsubmit="signup(event);return false">
                    <input type="text" placeholder="Username" name="username" onchange="handleChange(this)">
                    <input type="password" placeholder="Password" name="password" onchange="handleChange(this)">
                    <input type="email" placeholder="Email" name="email" onchange="handleChange(this)"> 
                    <input type="submit" value="Create Account">
                </form>
            </div>
        </div>

        <div class="alog">
            <div class="sign">
                <div class="accountsign">
                    <button  onclick="googleProvider()"><svg aria-hidden="true" class="native svg-icon iconGoogle" width="18" height="18" viewBox="0 0 18 18"><path d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z" fill="#4285F4"></path><path d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z" fill="#34A853"></path><path d="M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z" fill="#FBBC05"></path><path d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z" fill="#EA4335"></path></svg>
                        Sign in with Google        
                    </button>
    
                    <button  data-provider="github" data-oauthserver="https://github.com/login/oauth/authorize" data-oauthversion="2.0"><svg aria-hidden="true" class="svg-icon iconGitHub" width="18" height="18" viewBox="0 0 18 18"><path d="M9 1a8 8 0 00-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.42 7.42 0 014 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 009 1z" fill="#010101"></path></svg>
                        Sign in with GitHub        
                    </button>
    
                    <button  data-provider="facebook" data-oauthserver="https://www.facebook.com/v2.0/dialog/oauth" data-oauthversion="2.0"> <svg aria-hidden="true" class="svg-icon iconFacebook" width="18" height="18" viewBox="0 0 18 18"><path d="M3 1a2 2 0 00-2 2v12c0 1.1.9 2 2 2h12a2 2 0 002-2V3a2 2 0 00-2-2H3zm6.55 16v-6.2H7.46V8.4h2.09V6.61c0-2.07 1.26-3.2 3.1-3.2.88 0 1.64.07 1.87.1v2.16h-1.29c-1 0-1.19.48-1.19 1.18V8.4h2.39l-.31 2.42h-2.08V17h-2.5z" fill="#4167B2"></path></svg>
                        Sign in with Facebook 
                   </button>
                </div>
                <form action="" class="signform" onsubmit="signin(event);return false;">
                    <input type="email" placeholder="Email" name="email" onchange="handleinChange(this)">
                    <input type="password" placeholder="Password" name="password" onchange="handleinChange(this)">
                    <input type="submit" value="Log in">
                </form>
            </div>
        </div>

        <div class="maincontent">
            <div class="subcontent">
            </div>
        </div>
        <script src="ask.js"></script>
        <script src="content.js"></script>
        <script>
            var dropdown=false;
            var showform={
                asign:false,
                alog:false
            }

            var ain=false;
            var aup=false;

            function showforms(target){
            var signin="alog"
            var signup="asign"
            var asign=document.getElementsByClassName("asign")[0];
            var alog=document.getElementsByClassName("alog")[0];
            var maincontent=document.getElementsByClassName('maincontent')[0];
            // console.log(target.name);
            if(target.name===signin){
                if(ain){
                    alog.style.display="none";
                    // maincontent.style.filter="none";
                    maincontent.style.display="flex"
                    ain=false;
                }else{
                    alog.style.display="block";
                    // maincontent.style.filter="blur(4px)";
                    maincontent.style.display="none"
                    ain=true;
                }
                asign.style.display="none";
                aup=false;
            }else{
                if(aup){
                    asign.style.display="none";
                    // maincontent.style.filter="none";
                    maincontent.style.display="flex"
                    aup=false;
                }else{
                    asign.style.display="block";
                    // maincontent.style.filter="blur(4px)";
                    maincontent.style.display="none"
                    aup=true;
                }
                alog.style.display="none";
                ain=false;
                }
            }

            function profile(){
                console.log("profile");
                location.replace("profile.html")
            }
            addContent()
        </script>
        <script src="signup.js"></script>
        <script src="signin.js"></script>
    </body>
</html>